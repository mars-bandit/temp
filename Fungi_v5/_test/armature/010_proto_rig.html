<!DOCTYPE html><script type="module">
import App, { Quat, Vec3 }				from "../../fungi/App.js";
import InterleavedFloatArray from "../../fungi/data/InterleavedFloatArray.js";
import Capsule from "../../fungi/geo/Capsule.js";

//#####################################################

App.builder( false, true )
	.use_armature()
	.set_camera( 0, 25, 2.5, 0, 0.5, 0 )
	.add( init )
	//.render_loop( on_draw )
	.render_on_mouse()
	.build();

//#####################################################
let E;

function on_draw( dt, ss ){
	let b = E.Armature.get_e( "Bone1" );
	//console.log( b );
	//e.Node.set_rot_axis( App.Vec3.LEFT, 10 );
	b.Node.rot_by( 45 * dt, "x" );
	E.Armature.updated = true;
}

async function init(){
	load_shader();
	ProtoRig.init();

	//let e = ProtoRig.$( "rig", PROTO_MAN, false );
	let e = ProtoRig.$( "rig", MAXIMO, true );

	console.log( QUAT_Z90 );
    //console.log( e );

	//let b = e.Armature.get_e( "Bone1" );
	//console.log( b );
	//e.Node.set_rot_axis( App.Vec3.LEFT, 10 );
	//b.Node.rot_by( 45, "x" );

	//E = e;
	return true;
}

const TEST = [
	{ "name":"Bone0", "len":0.07, "idx":0, "p_idx":null, "bone_pos":[0,0.125,0], "bone_rot":[0,0,0,1], "top":[0.12,0.12,0.12,0.05], "bot":[0.12,0.12,0.12,-0.05], "rot":[0,0,0,1] },
	{ "name":"Bone1", "len":0.07, "idx":1, "p_idx":0, "bone_pos":[0,.25,0], "bone_rot":[0,0,0,1], "top":[0.12,0.12,0.12,0.05], "bot":[0.12,0.12,0.12,-0.05], "rot":[0,0,0,1] },
];

//#####################################################

function ProtoRigSys( ecs ){
	let ary = ecs.query_comp( "ProtoRig" );
	if( !ary ) return; // No Componets, skip.

	let i, a, e, ws, bones, flat;
	for( a of ary ){
		e = ecs.entities[ a.entity_id ];		
		if( !e.Armature.updated ) continue;

		bones	= e.Armature.bones;
		flat	= e.ProtoRig.bone_transform;
				
		for( i=0; i < bones.length; i++ ){
			ws = bones[ i ].ref.Node.world;
			flat.set( i, ws.rot, ws.pos );
		}

		e.ProtoRig.update_bone_buffer();
	}
}

class ProtoRig{
	static init( priority = 810 ){
		App.Components.reg( ProtoRig );
		App.ecs.sys_add( ProtoRigSys, priority );
	}

    static $( name, config, use_preview=false ){
		let e = App.$( name, ["Node","Draw","ProtoRig", "Armature"] );
		let p = e.ProtoRig;
        
		p.build( e, config );
		
		if( use_preview ) e.add_com( "BoneView" ).init();
		return e;
	}

	constructor(){
		this.bone_buffer = null;

		// Flat Worldspace Transfrom from Armature Bones
	    this.bone_transform = new InterleavedFloatArray()
	    	.add_var( "rot", 4 )
	    	.add_var( "pos", 3 );

	    // Capsule Visual Configuration
	    this.config = new InterleavedFloatArray()
	    	.add_var( "top", 4 )	// xyz = scale dome, w translate Y position
	    	.add_var( "bot", 4 )
			.add_var( "rot", 4 )	// Quaternion Rotation
			.add_var( "pos", 3 );	// Quaternion Rotation
	}

	build( e, ary ){
        let cnt = ary.length,
            arm = e.Armature,
            bt  = this.bone_transform,
            cfg = this.config;

        bt.expand_by( cnt, true );      // Initialize Bone Transform Buffer, Auto fill with 0s
        cfg.expand_by( cnt, false );    // Initialize Capsule Config Buffer, Fill in Manually

		//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		// Build up armature bones and capsule configurations
        let itm, ttop, bbot, top = [0,0,0,0], bot = [0,0,0,0];    
        for( itm of ary ){
			// Create Bone Entity
			console.log( itm.name );
            arm.add_bone( itm.name, itm.len, itm.p_idx )
            	.Node
				.set_rot( itm.bone_rot )
				.set_pos( itm.bone_pos );

			// Save Visual Config
			if( itm.top.length == 2 ){
				top[ 0 ] = top[ 1 ] = top[ 2 ] = itm.top[ 0 ];
				top[ 3 ] = itm.top[ 1 ];
				ttop = top;
			}else ttop = itm.top;

			if( itm.bot.length == 2 ){
				bot[ 0 ] = bot[ 1 ] = bot[ 2 ] = itm.bot[ 0 ];
				bot[ 3 ] = itm.bot[ 1 ];
				bbot = bot;
			}else bbot = itm.bot;

            cfg.push( ttop, bbot, ( itm.rot || [0,0,0,1] ), ( itm.pos || [0,0,0] ) ); 
		}
		
		//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		// Setup Buffer to hold the Flat World Space Transform of the Bones
		this.bone_buffer = App.Buf.new_array( bt.buffer, 0, false );
		this.bone_buffer.set_interleaved( bt.get_stride_info() );

		//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		// Build Capsule Mesh
		// (arc_div-1) * lathe_cnt + 1 == Dome Vert Count
		let geo 	= Capsule.geo( 10, 4, 0.5, 0 ), //Capsule.geo( lathe_cnt=8, arc_div=5, radius=0.5, height=0.25 )
			mesh	= new App.Mesh( "Proto" ),
			vao 	= new App.Vao().bind();

		mesh.buf.idx = App.Buf.new_element( geo.ind, true, false );
		vao.add_indices( mesh.buf.idx );

		mesh.buf.vert = App.Buf.new_array( geo.vert, 3, true, false );
		vao.add_buf( mesh.buf.vert, App.Shader.POS_LOC );
		
		mesh.buf.norm = App.Buf.new_array( geo.norm, 3, true, false );
		vao.add_buf( mesh.buf.norm, App.Shader.NORM_LOC );

		//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		// Instanced Data 
		
		// Capsule Configuration
		mesh.buf.cfg = App.Buf
			.new_array( cfg.buffer )
			.set_interleaved( cfg.get_stride_info() );
		vao.add_interleaved( mesh.buf.cfg, [12,13,14,15], true );

		// Bone Transform ( Instanced )
		vao.add_interleaved( this.bone_buffer, [10,11], true );

		//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		// Clean up VAO Building and Get Mesh Ready
		App.Vao.unbind();
		App.Buf.unbind_array().unbind_element();

		mesh.set( vao, geo.ind.length, cfg.len );	// Set VAO and Count Values to render mesh
		arm.finalize();								// Compile Bind Pose

		//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		let mat = SHADER.new_material( "ProtoRigMat" );
		e.Draw.add( mesh, mat, App.Mesh.TRI );
	}

	update_bone_buffer(){ 
		this.bone_buffer.update( this.bone_transform.buffer );
	}

}


//##############################################################

// #region shader
let SHADER = null;
function load_shader(){
	SHADER = App.Shader.from_src( "ProtoRig", vert_src, frag_src )
		.add_uniform_blocks( ["Global","Model"] );
		//.add_uniform( "cube_tex", "samplerCube", null );
}

const vert_src = `#version 300 es
	layout(location=0) in vec3 a_pos;
	layout(location=1) in vec3 a_norm;
	layout(location=2) in vec2 a_uv;

	layout(location=10)	in vec4 a_ins_rot;
	layout(location=11)	in vec3 a_ins_pos;

	layout(location=12)	in vec4 a_cfg_top;
	layout(location=13)	in vec4 a_cfg_bot;
	layout(location=14)	in vec4 a_cfg_rot;
	layout(location=15)	in vec3 a_cfg_pos;

	uniform Global{ 
		mat4 proj_view; 
		mat4 camera_matrix;
		vec3 camera_pos;
		float delta_time;
		vec2 screen_size;
		float clock;
	} global;

	uniform Model{ 
		mat4 view_matrix;
	} model;

	//out vec2 frag_uv;
	out vec3 frag_norm;
	out vec3 frag_cam_pos;
	out vec3 frag_pos;

	const int DIV_IDX = 31; // LT = TOP DOME
	vec3 quat_mul_vec3( vec4 q, vec3 v ){ return v + (2.0 * cross(q.xyz, cross(q.xyz, v) + (q.w * v))); }

	vec4 qmul(vec4 q1, vec4 q2){
		return vec4(q2.xyz * q1.w + q1.xyz * q2.w + cross(q1.xyz, q2.xyz), q1.w * q2.w - dot(q1.xyz, q2.xyz) );
	}

	void main(void){
		vec3 pos	= a_pos;

		//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		// Capsule Configuration
		if( gl_VertexID < DIV_IDX ){
			pos.xyz	*= a_cfg_top.xyz;	// Scale Dom
			pos.y	+= a_cfg_top.w;		// Move Dome
		}else{
			pos.xyz	*= a_cfg_bot.xyz;	// Scale Dom
			pos.y	+= a_cfg_bot.w;		// Move Dome
		}

		pos = quat_mul_vec3( a_cfg_rot, pos );
		pos += a_cfg_pos;

		//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		// Transform Instances
		pos 		= quat_mul_vec3( a_ins_rot, pos );
		pos 		+= a_ins_pos;

		vec4 wpos = model.view_matrix * vec4( pos, 1.0 );

		//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		//frag_uv		= a_uv;
		frag_pos		= wpos.xyz;

		frag_norm 		= quat_mul_vec3( qmul( a_cfg_rot, a_ins_rot ), a_norm );
		frag_norm 		= mat3( transpose( inverse( model.view_matrix ) ) ) * frag_norm;
		
		//frag_cam_pos	= global.camera_pos;
		

		//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		gl_Position = global.proj_view * wpos;
		gl_PointSize = 5.0;

	}`;

const frag_src = `#version 300 es
	precision mediump float;
	
	out vec4 out_color;

	//-------------------------

	in vec3 frag_norm;
	//in vec3 frag_cam_pos;
	in vec3 frag_pos;

	const vec3 color 				= vec3( 1.0, 0.0, 0.0 );
	const vec3 lightPosition 		= vec3( 6.0, 10.0, 1.0 );
	const vec3 lightColor 			= vec3( 1.0, 1.0, 1.0 );
	const float uAmbientStrength	= 0.5;
	const float uDiffuseStrength	= 0.5;

	//-------------------------

	void main( void ){
		//out_color = vec4( 1.0, 0.0, 0.0, 1.0 );
		//vec3 frag_norm = normalize( cross( dFdx(frag_pos), dFdy(frag_pos) ) ); //Calc the Normal of the Rasterizing Pixel

		// Ambient Lighting
		vec3 cAmbient		= lightColor * uAmbientStrength;

		// Diffuse Lighting
		vec3 lightVector	= normalize( lightPosition - frag_pos );		//light direction based on pixel world position
		float diffuseAngle	= max( dot( frag_norm, lightVector ) ,0.0 );	//Angle between Light Direction and Pixel Direction (1==90d)
		vec3 cDiffuse		= lightColor * diffuseAngle * uDiffuseStrength;

		out_color = vec4( color * ( cAmbient + cDiffuse ), 1.0 );
	}
`;

// #endregion

const QUAT_Z90	= Array.from( new Quat().from_axis_angle( [0,0,1], 90 * Math.PI / 180 ) );
const QUAT_Z180	= Array.from( new Quat().from_axis_angle( [0,0,1], Math.PI ) );
const QUAT_X180	= Array.from( new Quat().from_axis_angle( [1,0,0], Math.PI ) );

const QUAT_ZN90	= Array.from( new Quat().from_axis_angle( [0,0,1], -90 * Math.PI / 180 ) );
const QUAT_X90	= Array.from( new Quat().from_axis_angle( [1,0,0], 90 * Math.PI / 180 ) );
const QUAT_XN90	= Array.from( new Quat().from_axis_angle( [1,0,0], -90 * Math.PI / 180 ) );
const QUAT_X45	= Array.from( new Quat().from_axis_angle( [1,0,0], 45 * Math.PI / 180 ) );
const QUAT_XN45	= Array.from( new Quat().from_axis_angle( [1,0,0], -45 * Math.PI / 180 ) );
const QUAT_XN20	= Array.from( new Quat().from_axis_angle( [1,0,0], -20 * Math.PI / 180 ) );
const QUAT_XN10	= Array.from( new Quat().from_axis_angle( [1,0,0], -10 * Math.PI / 180 ) );
const QUAT_X10	= Array.from( new Quat().from_axis_angle( [1,0,0], 10 * Math.PI / 180 ) );
const QUAT_X20	= Array.from( new Quat().from_axis_angle( [1,0,0], 20 * Math.PI / 180 ) );
const QUAT_NONE	= [0,0,0,1];

const PROTO_MAN = [
	{ "name":"Hips", "len":0.07, "idx":0, "p_idx":null,		"bone_pos":[0,0.750,0],		"bone_rot":[0,0,0,1], "top":[0.12,0.12,0.12,0.05], "bot":[0.12,0.12,0.12,-0.05], "rot":QUAT_Z90 },
	{ "name":"Spine", "len":0.09, "idx":1, "p_idx":0,		"bone_pos":[0,0.07,0],	"bone_rot":[0,0,0,1], "top":[0.1,0.1,0.1,0.1], "bot":[0.1,0.1,0.1,0], "rot":QUAT_NONE },
	{ "name":"Spine1", "len":0.1, "idx":2, "p_idx":1,		"bone_pos":[0,0.09,0],	"bone_rot":[0,0,0,1], "top":[0.14,0.14,0.14,0.1], "bot":[0.13,0.13,0.13,0], "rot":QUAT_NONE },
	{ "name":"Spine2", "len":0.07, "idx":3, "p_idx":2,		"bone_pos":[0,0.1,0.0],	"bone_rot":[0,0,0,1], "top":[0.16,0.16,0.18,0.06], "bot":[0.16,0.16,0.18,-0.06], "rot":QUAT_Z90 },
	{ "name":"Neck", "len":0.07, "idx":4, "p_idx":3,		"bone_pos":[0,0.07,0],	"bone_rot":[0,0,0,1], "top":[0.06,0.06,0.06,0.05], "bot":[0.07,0.07,0.07,0], "rot":QUAT_NONE },
	{ "name":"Head", "len":0.1, "idx":5, "p_idx":4,			"bone_pos":[0,0.07,0.015],	"bone_rot":[0,0,0,1], "top":[0.12,0.11,0.12,0.045], "bot":[0.105,0.13,0.105,0], "rot":QUAT_NONE },

	{ "name":"LeftShoulder", "len":0.075, "idx":6, "p_idx":3,	"bone_pos":[0.09,0.03,-0.002],	"bone_rot":QUAT_ZN90, "top":[0.11,0.11,0.12,0.02], "bot":[0.11,0.11,0.12,0], "rot":QUAT_NONE },
	{ "name":"LeftArm", "len":0.19, "idx":7, "p_idx":6,	"bone_pos":[0,0.075,0],	"bone_rot":QUAT_NONE, "top":[0.060,0.060,0.060,0.15], "bot":[0.08,0.08,0.08,0], "rot":QUAT_NONE },
	{ "name":"LeftForeArm", "len":0.170, "idx":8, "p_idx":7,	"bone_pos":[0,0.19,0],	"bone_rot":QUAT_NONE, "top":[0.05,0.05,0.05,0.145], "bot":[0.07,0.07,0.07,0], "rot":QUAT_NONE },
	
	{ "name":"LeftHand", "len":0.020, "idx":9, "p_idx":8,	"bone_pos":[0,0.170,0],	"bone_rot":QUAT_NONE, "top":[0.05,0.05,0.06,0.0], "bot":[0.05,0.05,0.06,0], "rot":QUAT_NONE },
	{ "name":"LeftHandIndex1", "len":0.025, "idx":10, "p_idx":9,	"bone_pos":[-0.006,0.025,0.013],	"bone_rot":QUAT_NONE, "top":[0.02,0.02,0.02,0.011], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },
	{ "name":"LeftHandIndex2", "len":0.015, "idx":11, "p_idx":10,	"bone_pos":[0,0.025,0.0],	"bone_rot":QUAT_NONE, "top":[0.02,0.02,0.02,0.011], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },

	{ "name":"LeftHandMiddle1", "len":0.025, "idx":12, "p_idx":9,	"bone_pos":[-0.006,0.025,-0.013],	"bone_rot":QUAT_NONE, "top":[0.02,0.02,0.02,0.011], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },
	{ "name":"LeftHandMiddle1", "len":0.015, "idx":13, "p_idx":12,	"bone_pos":[0,0.025,0.0],	"bone_rot":QUAT_NONE, "top":[0.02,0.02,0.02,0.011], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },

	{ "name":"LeftHandThumb1", "len":0.02, "idx":14, "p_idx":9,	"bone_pos":[-0.006,0.005,0.03],	"bone_rot":QUAT_X90, "top":[0.02,0.02,0.02,0.004], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },
	{ "name":"LeftHandThumb2", "len":0.010, "idx":15, "p_idx":14,	"bone_pos":[0,0.02,0.0],	"bone_rot":QUAT_NONE, "top":[0.02,0.02,0.02,0.004], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },

	{ "name":"LeftUpLeg", "len":0.35, "idx":16, "p_idx":0,	"bone_pos":[ 0.075, -0.01, 0 ],	"bone_rot":QUAT_Z180, "top":[0.08,0.08,0.08,0.30], "bot":[0.10,0.1,0.10,0], "rot":QUAT_NONE },
	{ "name":"LeftUpLeg", "len":0.35, "idx":17, "p_idx":16,	"bone_pos":[ 0, 0.36, 0 ],	"bone_rot":QUAT_NONE, "top":[0.055,0.055,0.055,0.31], "bot":[0.08,0.08,0.08,0], "rot":QUAT_NONE },
	{ "name":"LeftFoot", "len":0.11, "idx":18, "p_idx":17,	"bone_pos":[ 0, 0.35, 0 ],	"bone_rot":QUAT_X90, "top":[0.09,0.06,0.06,0.07], "bot":[0.09,0.06,0.06,0], "rot":QUAT_NONE },
	{ "name":"LeftToeBase", "len":0.05, "idx":19, "p_idx":18,	"bone_pos":[ 0, 0.11, 0 ],	"bone_rot":QUAT_NONE, "top":[0.06,0.06,0.055,0.015], "bot":[0.06,0.06,0.055,-0.015], "rot":QUAT_Z90 },

	{ "name":"RightUpLeg", "len":0.35, "idx":20, "p_idx":0,	"bone_pos":[ -0.075, -0.01, 0 ],	"bone_rot":QUAT_Z180, "top":[0.08,0.08,0.08,0.30], "bot":[0.10,0.1,0.10,0], "rot":QUAT_NONE },
	{ "name":"RightUpLeg", "len":0.35, "idx":21, "p_idx":20,	"bone_pos":[ 0, 0.36, 0 ],	"bone_rot":QUAT_NONE, "top":[0.055,0.055,0.055,0.31], "bot":[0.08,0.08,0.08,0], "rot":QUAT_NONE },
	{ "name":"RightFoot", "len":0.11, "idx":22, "p_idx":21,	"bone_pos":[ 0, 0.35, 0 ],	"bone_rot":QUAT_X90, "top":[0.09,0.06,0.06,0.07], "bot":[0.09,0.06,0.06,0], "rot":QUAT_NONE },
	{ "name":"RightToeBase", "len":0.05, "idx":23, "p_idx":22,	"bone_pos":[ 0, 0.11, 0 ],	"bone_rot":QUAT_NONE, "top":[0.06,0.06,0.055,0.015], "bot":[0.06,0.06,0.055,-0.015], "rot":QUAT_Z90 },

	{ "name":"RightShoulder", "len":0.075, "idx":24, "p_idx":3,	"bone_pos":[-0.09,0.03,-0.002],	"bone_rot":QUAT_Z90, "top":[0.11,0.11,0.12,0.02], "bot":[0.11,0.11,0.12,0], "rot":QUAT_NONE },
	{ "name":"RightArm", "len":0.19, "idx":25, "p_idx":24,	"bone_pos":[0,0.075,0],	"bone_rot":QUAT_NONE, "top":[0.060,0.060,0.060,0.15], "bot":[0.08,0.08,0.08,0], "rot":QUAT_NONE },
	{ "name":"RightForeArm", "len":0.170, "idx":26, "p_idx":25,	"bone_pos":[0,0.19,0],	"bone_rot":QUAT_NONE, "top":[0.05,0.05,0.05,0.145], "bot":[0.07,0.07,0.07,0], "rot":QUAT_NONE },
	

	{ "name":"RightHand", "len":0.020, "idx":27, "p_idx":26,	"bone_pos":[0,0.170,0],	"bone_rot":QUAT_NONE, "top":[0.05,0.05,0.06,0.0], "bot":[0.05,0.05,0.06,0], "rot":QUAT_NONE },
	{ "name":"RightHandIndex1", "len":0.025, "idx":28, "p_idx":27,	"bone_pos":[-0.006,0.025,0.013],	"bone_rot":QUAT_NONE, "top":[0.02,0.02,0.02,0.011], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },
	{ "name":"RightHandIndex2", "len":0.015, "idx":29, "p_idx":28,	"bone_pos":[0,0.025,0.0],	"bone_rot":QUAT_NONE, "top":[0.02,0.02,0.02,0.011], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },

	{ "name":"RightHandMiddle1", "len":0.025, "idx":30, "p_idx":27,	"bone_pos":[-0.006,0.025,-0.013],	"bone_rot":QUAT_NONE, "top":[0.02,0.02,0.02,0.011], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },
	{ "name":"RightHandMiddle1", "len":0.015, "idx":31, "p_idx":30,	"bone_pos":[0,0.025,0.0],	"bone_rot":QUAT_NONE, "top":[0.02,0.02,0.02,0.011], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },

	{ "name":"RightHandThumb1", "len":0.02, "idx":32, "p_idx":27,	"bone_pos":[-0.006,0.005,0.03],	"bone_rot":QUAT_X90, "top":[0.02,0.02,0.02,0.004], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },
	{ "name":"RightHandThumb2", "len":0.010, "idx":33, "p_idx":32,	"bone_pos":[0,0.02,0.0],	"bone_rot":QUAT_NONE, "top":[0.02,0.02,0.02,0.004], "bot":[0.022,0.022,0.022,0], "rot":QUAT_NONE },
];

const PROTO_DINO = [
	{ "name":"Hips", "len":0.15, "idx":0, "p_idx":null,	"bone_pos":[0,0.5,0],			"bone_rot":QUAT_X90, "top":[0.45,0.45,0.45,0.05], "bot":[0.45,0.45,0.45,-0.05], "rot":QUAT_NONE },
	{ "name":"Spine", "len":0.15, "idx":1, "p_idx":0,	"bone_pos":[0,0.15,-0.03],	"bone_rot":QUAT_XN10, "top":[0.33,0.33,0.33,0.1], "bot":[0.33,0.33,0.33,0], "rot":QUAT_NONE },
	{ "name":"Spine1", "len":0.2, "idx":2, "p_idx":1,	"bone_pos":[0,0.15,-0.03],	"bone_rot":QUAT_XN10, "top":[0.30,0.30,0.30,0.1], "bot":[0.30,0.30,0.30,0], "rot":QUAT_NONE },
	{ "name":"Neck", "len":0.2, "idx":3, "p_idx":2,		"bone_pos":[0,0.2,-0.04],	"bone_rot":QUAT_NONE, "top":[0.20,0.20,0.20,0.15], "bot":[0.20,0.20,0.20,0], "rot":QUAT_NONE },
	{ "name":"Head", "len":0.1, "idx":4, "p_idx":3,		"bone_pos":[0,0.2,0.00],	"bone_rot":QUAT_X20, "top":[0.31,0.31,0.31,0.25], "bot":[0.34,0.34,0.34,0.1], "rot":QUAT_NONE },

	{ "name":"LeftLeg1", "len":0.24, "idx":5, "p_idx":0, "bone_pos":[0.18,0,0],	"bone_rot":QUAT_X90, "top":[0.18,0.18,0.18,0.18], "bot":[0.22,0.22,0.22,0.05], "rot":QUAT_NONE },
	{ "name":"LeftLeg2", "len":0.21, "idx":6, "p_idx":5, "bone_pos":[0,0.24,0],	"bone_rot":QUAT_NONE, "top":[0.10,0.10,0.10,0.19], "bot":[0.15,0.15,0.15,0.05], "rot":QUAT_NONE },
	{ "name":"LeftLeg3", "len":0.19, "idx":7, "p_idx":6, "bone_pos":[0,0.21,0],	"bone_rot":QUAT_NONE, "top":[0.06,0.06,0.06,0.20], "bot":[0.08,0.08,0.08,0.05], "rot":QUAT_NONE },
	{ "name":"LeftFoot", "len":0.1, "idx":8, "p_idx":7, "bone_pos":[0,0.21,0],	"bone_rot":QUAT_XN90, "top":[0.13,0.08,0.08,0.1], "bot":[0.13,0.08,0.08,0.02], "rot":QUAT_NONE },

	{ "name":"LeftArm1", "len":0.22, "idx":9, "p_idx":2, "bone_pos":[0.07,0.08,0.1],	"bone_rot":QUAT_ZN90, "top":[0.06,0.06,0.06,0.18], "bot":[0.08,0.08,0.08,0.00], "rot":QUAT_NONE },
	{ "name":"LeftArm2", "len":0.24, "idx":10, "p_idx":9, "bone_pos":[0,0.22,0],	"bone_rot":QUAT_NONE, "top":[0.04,0.04,0.04,0.18], "bot":[0.05,0.05,0.05,0.00], "rot":QUAT_NONE },

	{ "name":"Tail1", "len":0.19, "idx":11, "p_idx":0,	"bone_pos":[0,-0.2,-0.05],	"bone_rot":QUAT_X180, "top":[0.25,0.15,0.25,0.12], "bot":[0.25,0.1,0.25,0], "rot":QUAT_NONE },
	{ "name":"Tail2", "len":0.22, "idx":12, "p_idx":11,	"bone_pos":[0,0.19,0],	"bone_rot":QUAT_NONE, "top":[0.18,0.15,0.18,0.15], "bot":[0.21,0.1,0.21,0], "rot":QUAT_NONE },
	{ "name":"Tail3", "len":0.22, "idx":13, "p_idx":12,	"bone_pos":[0,0.22,0],	"bone_rot":QUAT_NONE, "top":[0.12,0.1,0.12,0.15], "bot":[0.17,0.1,0.17,0], "rot":QUAT_NONE },
	{ "name":"Tail4", "len":0.22, "idx":14, "p_idx":13,	"bone_pos":[0,0.22,0],	"bone_rot":QUAT_NONE, "top":[0.07,0.1,0.07,0.15], "bot":[0.11,0.1,0.11,0], "rot":QUAT_NONE },
	{ "name":"Tail5", "len":0.22, "idx":15, "p_idx":14,	"bone_pos":[0,0.22,0],	"bone_rot":QUAT_NONE, "top":[0.03,0.1,0.03,0.15], "bot":[0.07,0.1,0.07,0], "rot":QUAT_NONE },

	{ "name":"RightLeg1", "len":0.24, "idx":16, "p_idx":0, "bone_pos":[-0.18,0,0],	"bone_rot":QUAT_X90, "top":[0.18,0.18,0.18,0.18], "bot":[0.22,0.22,0.22,0.05], "rot":QUAT_NONE },
	{ "name":"RightLeg2", "len":0.21, "idx":17, "p_idx":16, "bone_pos":[0,0.24,0],	"bone_rot":QUAT_NONE, "top":[0.10,0.10,0.10,0.19], "bot":[0.15,0.15,0.15,0.05], "rot":QUAT_NONE },
	{ "name":"RightLeg3", "len":0.19, "idx":18, "p_idx":17, "bone_pos":[0,0.21,0],	"bone_rot":QUAT_NONE, "top":[0.06,0.06,0.06,0.20], "bot":[0.08,0.08,0.08,0.05], "rot":QUAT_NONE },
	{ "name":"RightFoot", "len":0.1, "idx":19, "p_idx":18, "bone_pos":[0,0.21,0],	"bone_rot":QUAT_XN90, "top":[0.13,0.08,0.08,0.1], "bot":[0.13,0.08,0.08,0.02], "rot":QUAT_NONE },

	{ "name":"RightArm1", "len":0.22, "idx":20, "p_idx":2, "bone_pos":[-0.07,0.08,0.1],	"bone_rot":QUAT_Z90, "top":[0.06,0.06,0.06,0.18], "bot":[0.08,0.08,0.08,0.00], "rot":QUAT_NONE },
	{ "name":"RightArm2", "len":0.24, "idx":21, "p_idx":20, "bone_pos":[0,0.22,0],	"bone_rot":QUAT_NONE, "top":[0.04,0.04,0.04,0.18], "bot":[0.05,0.05,0.05,0.00], "rot":QUAT_NONE },
];


const ROTX90 = [0, 0, 0.7071067690849304, 0.7071067690849304];

// TODO, Rename bone_pos, to bind_pos;
const MAXIMO = [
	{ "name":"Hips","len":0.10559237003327704,"idx":0,"p_idx":null, "top":[0.15,0.05], "bot":[0.15,-0.05], "rot":ROTX90, "bone_pos":[0,1.0399147272109985,0.02076093479990959], "bone_rot":[2.4268916831715615e-7,0,0,1]  },
	{ "name":"Spine","len":0.0974514316395617,"idx":1,"p_idx":0, "top":[0.15,0.00], "bot":[0.15,-0.00], "bone_pos":[0,0.10559237748384476,0], "bone_rot":[-0.044645827263593674,-8.692448299794618e-27,-4.453656740259141e-20,0.9990028738975525]},
	{ "name":"Spine1","len":0.09304484613180132,"idx":2,"p_idx":1, "top":[0.15,0.00], "bot":[0.15,-0.00], "bone_pos":[0,0.09745147824287415,0], "bone_rot":[-0.029409686103463173,-3.2960057599844583e-21,4.441442901526913e-20,0.999567449092865]},
	{ "name":"Spine2","len":0.16759334937587658,"idx":3,"p_idx":2, "top":[0.19,0.16,0.19,0.05], "bot":[0.19,0.16,0.19,-0.05], "pos":[0,0.05,0], "rot":ROTX90, "bone_pos":[0,0.09304478764533997,0], "bone_rot":[0.07400670647621155,3.6727628484210417e-28,9.542332680489529e-27,0.9972577691078186]},

	{ "name":"Neck","len":0.09762965130228998,"idx":4,"p_idx":3, "top":[0.05,0.00], "bot":[0.05,-0.00], "bone_pos":[0,0.16569370031356812,-0.02516167424619198],"bone_rot":[1.9075930168810373e-8,-1.1470830885815196e-34,-8.605402693567593e-35,1]},
	{ "name":"Head","len":0.1,"idx":5,"p_idx":4, "top":[0.15,0.00], "bot":[0.15,-0.00], "bone_pos":[0,0.09616458415985107,0.016849953681230545],"bone_rot":[-1.3502827300726494e-8,-4.0840682940945415e-35,-6.660796967887298e-36,1]},

	{ "name":"LeftShoulder","len":0.10837614876574414,"idx":6,"p_idx":3, "top":[0.10,0.00], "bot":[0.10,-0.00], "bone_pos":[0.04570503160357475,0.10843020677566528,-0.0262798760086298],"bone_rot":[0.7071067690849304,0.7071067690849304,5.338507236274381e-8,-5.338507236274381e-8]},
	{ "name":"LeftArm","len":0.27841533720493317,"idx":7,"p_idx":6, "top":[0.05,0.00], "bot":[0.05,-0.00], "bone_pos":[-0.00524682505056262,0.10592274367809296,0.022321199998259544],"bone_rot":[-1.495118037678709e-35,-4.519952057080445e-8,1.1566897702458666e-34,1]},
	{ "name":"LeftForeArm","len":0.28328818082995455,"idx":8,"p_idx":7, "top":[0.10,0.00], "bot":[0.10,-0.00], "bone_pos":[0,0.278415322303772,0],"bone_rot":[-6.706603130623989e-7,7.00962573318975e-7,0.0000016832213987072464,1]},

	{"name":"LeftHand","len":0.03969602102664749,"idx":9,"p_idx":8, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.2832881808280945,0],"bone_rot":[-0.0000016157980553543894,0.000001614453026377305,-9.588043212716002e-7,1]},
	{"name":"LeftHandThumb1","len":0.041696256351713874,"idx":10,"p_idx":9, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[-0.01574258878827095,0.02466581016778946,-0.026824291795492172],"bone_rot":[-0.22191810607910156,-0.059467192739248276,0.25190043449401855,0.9400862455368042]},
	{"name":"LeftHandThumb2","len":0.034242796459341654,"idx":11,"p_idx":10, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.041696254163980484,0],"bone_rot":[-0.000019305929527035914,0.00003363657015142962,-0.0000676217969157733,1]},
	{"name":"LeftHandThumb3","len":0.1,"idx":12,"p_idx":11, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.03424280881881714,0],"bone_rot":[0.011500630527734756,-0.0017704364145174623,0.0036687529645860195,0.9999255537986755]},
	{"name":"LeftHandIndex1","len":0.03676408529281616,"idx":13,"p_idx":9, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[-0.005164358299225569,0.09108859300613403,-0.02260071039199829],"bone_rot":[0.000002279914497194113,-0.0000023154120754043106,-7.219787789836118e-7,1]},
	{"name":"LeftHandIndex2","len":0.028830707074694782,"idx":14,"p_idx":13, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.036764077842235565,0],"bone_rot":[-0.000005065046025265474,0.000005125999450683594,-2.465329940193328e-9,1]},
	{"name":"LeftHandIndex3","len":0.1,"idx":15,"p_idx":14, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.028830723837018013,0],"bone_rot":[0.000014023946278030053,-0.00001409131618856918,-0.000004982239261153154,1]},
	{"name":"LeftHandMiddle1","len":0.03698229789733887,"idx":16,"p_idx":9, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[-0.000003653086878330214,0.09533418715000153,0],"bone_rot":[0.0000022864619495521765,-0.0000023154120754043106,-7.244172479659028e-7,1]},
	{"name":"LeftHandMiddle2","len":0.02950930595452126,"idx":17,"p_idx":16, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.03698229789733887,0],"bone_rot":[-0.0000030297826469904976,0.000003099441300946637,-9.861094579788343e-12,1]},
	{"name":"LeftHandMiddle3","len":0.1,"idx":18,"p_idx":17, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.029509298503398895,0],"bone_rot":[1.3773330920230364e-7,-1.8769137000163028e-7,0.000008413082468905486,1]},
	{"name":"LeftHandRing1","len":0.03154021501541138,"idx":19,"p_idx":9, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[-0.000433617940871045,0.09104256331920624,0.018650881946086884],"bone_rot":[0.0000022736619484930998,-0.0000023154120754043106,-7.243664867928601e-7,1]},
	{"name":"LeftHandRing2","len":0.029376685619539433,"idx":20,"p_idx":19, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.03154021129012108,0],"bone_rot":[-0.0000017625555983613594,0.000001788139229574881,-5.4141510719141195e-11,1]},
	{"name":"LeftHandRing3","len":0.1,"idx":21,"p_idx":20, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.0293766800314188,0],"bone_rot":[0.0000031824711186345667,-0.000003104724555669236,0.000009005581887322478,1]},
	{"name":"LeftHandPinky1","len":0.03600037097930908,"idx":22,"p_idx":9, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[-0.004892153199762106,0.0807739719748497,0.038060639053583145],"bone_rot":[0.0000022765411813452374,-0.0000023154120754043106,-7.243598361128534e-7,1]},
	{"name":"LeftHandPinky2","len":0.021142065527092416,"idx":23,"p_idx":22, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.03600034862756729,0],"bone_rot":[0.000006353253411361948,-0.000006276305157371098,0.000002819155724864686,1]},
	{"name":"LeftHandPinky3","len":0.1,"idx":24,"p_idx":23, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.021142063662409782,0],"bone_rot":[-0.000005777703790954547,0.000005574775059358217,-0.000008853048711898737,1]},

	{"name":"RightShoulder","len":0.10838109046244417,"idx":25,"p_idx":3, "top":[0.10,0.00], "bot":[0.10,-0.00], "bone_pos":[-0.045699592679739,0.10842543840408325,-0.026280172169208527],"bone_rot":[1.0185958743136325e-8,-1.0185956966779486e-8,0.7071067690849304,0.7071067690849304]},
	{"name":"RightArm","len":0.27841518819332123,"idx":26,"p_idx":25, "top":[0.05,0.00], "bot":[0.05,-0.00], "bone_pos":[-0.005235613323748112,0.105928435921669,-0.022320741787552834],"bone_rot":[3.736904002898115e-35,-1.006445394960507e-15,-5.495755792415194e-35,1]},
	{"name":"RightForeArm","len":0.2832881212237005,"idx":27,"p_idx":26, "top":[0.10,0.00], "bot":[0.10,-0.00], "bone_pos":[0,0.2784152030944824,0],"bone_rot":[2.1040301589891897e-7,-2.0325643390606274e-7,6.31208195045474e-7,1]},

	{"name":"RightHand","len":0.08941820392476747,"idx":28,"p_idx":27, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.2832881510257721,0],"bone_rot":[0.000003163138671880006,-0.000003194210648871376,-6.312201321634348e-7,1]},
	{"name":"RightHandPinky1","len":0.03600037097930908,"idx":29,"p_idx":28, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[-0.004894803743809462,0.08076566457748413,-0.03806004300713539],"bone_rot":[-0.0000033630744837864768,0.0000033974647521972656,-1.1425927912145362e-11,1]},
	{"name":"RightHandPinky2","len":0.021142125137114453,"idx":30,"p_idx":29, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.03600034862756729,0],"bone_rot":[0.000011971213098149747,-0.000011956633898080327,-0.0000056385929383395705,1]},
	{"name":"RightHandPinky3","len":0.1,"idx":31,"p_idx":30, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.02114214189350605,0],"bone_rot":[-0.00000802205249783583,0.000008068487659329548,-3.9523754935544275e-7,1]},
	{"name":"RightHandRing1","len":0.03154021501541138,"idx":32,"p_idx":28, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[-0.00043874504626728594,0.09103216230869293,-0.018651019781827927],"bone_rot":[-0.000003366203372934251,0.000003397464979570941,-1.1436558297606148e-11,1]},
	{"name":"RightHandRing2","len":0.02937680483481248,"idx":33,"p_idx":32, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.03154021501541138,0],"bone_rot":[0.000008235279892687686,-0.000008292319762404077,-0.000006086941539251711,1]},
	{"name":"RightHandRing3","len":0.1,"idx":34,"p_idx":33, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.029376834630966187,0],"bone_rot":[-0.000015700450603617355,0.00001574820271343924,0.000015092553439899348,1]},
	{"name":"RightHandMiddle1","len":0.036982178688049316,"idx":35,"p_idx":28, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.09531952440738678,0],"bone_rot":[-0.000003373543677298585,0.0000033974647521972656,1.1594199558762064e-11,1]},
	{"name":"RightHandMiddle2","len":0.029509425164356336,"idx":36,"p_idx":35, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.036982160061597824,0],"bone_rot":[-0.000003787220066442387,0.0000038214084270293824,-0.000002019868361458066,1]},
	{"name":"RightHandMiddle3","len":0.1,"idx":37,"p_idx":36, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.029509400948882103,0],"bone_rot":[0.000003721492703334661,-0.0000037618035548803164,0.0000020198690435790922,1]},
	{"name":"RightHandIndex1","len":0.03676402568817139,"idx":38,"p_idx":28, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[-0.005171900615096092,0.09108030050992966,0.022601136937737465],"bone_rot":[-0.0000033692147098918213,0.0000033974647521972656,-1.1446789696667459e-11,1]},
	{"name":"RightHandIndex2","len":0.02883070707527981,"idx":39,"p_idx":38, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.036764007061719894,0],"bone_rot":[0.000005616404450847767,-0.000005643691110890359,-0.0000020674101506301668,1]},
	{"name":"RightHandIndex3","len":0.1,"idx":40,"p_idx":39, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.028830701485276222,0],"bone_rot":[0.000002786867753457045,-0.000002750003659457434,0.000012031735423079226,1]},
	{"name":"RightHandThumb1","len":0.04171650653444302,"idx":41,"p_idx":28, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[-0.015732264146208763,0.02464570663869381,0.026827214285731316],"bone_rot":[0.22176654636859894,0.05947277694940567,0.25208544731140137,0.9400720596313477]},
	{"name":"RightHandThumb2","len":0.034223893455291164,"idx":42,"p_idx":41, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.0417165532708168,0],"bone_rot":[0.00034027191577479243,-0.00019238849927205592,-0.0003856124822050333,0.9999998211860657]},
	{"name":"RightHandThumb3","len":0.1,"idx":43,"p_idx":42, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.034223929047584534,0],"bone_rot":[-0.011897333897650242,0.00195137073751539,0.004018437582999468,0.9999192357063293]},

	{"name":"LeftUpLeg","len":0.44371384382253165,"idx":44,"p_idx":0, "top":[0.17,0.36], "bot":[0.17,0], "bone_pos":[0.094,-0.0675,-0.0159],"bone_rot":[-4.371138828673793e-8,0,1,3.406487686135706e-22]},
	{"name":"LeftLeg","len":0.4452783841217977,"idx":45,"p_idx":44, "top":[0.15,0.43], "bot":[0.15,0], "bone_pos":[0,0.44371384382247925,0],"bone_rot":[0.003196412930265069,0.0000028676147394435247,-1.5653178309094073e-8,0.9999948740005493]},
	{"name":"LeftFoot","len":0.11583700957847694,"idx":46,"p_idx":45, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.4452784061431885,0],"bone_rot":[0.354154109954834,-0.0000027842902454722207,0.0000010277683486492606,0.935187041759491]},
	{"name":"LeftToeBase","len":0.1,"idx":47,"p_idx":46, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.11583702266216278,0],"bone_rot":[0.4079362452030182,1.7544498120969365e-7,-2.7185055984091377e-8,0.9130104184150696]},

	{"name":"RightUpLeg","len":0.44371455907826896,"idx":48,"p_idx":0, "top":[0.17,0.36], "bot":[0.17,0], "bone_pos":[-0.094,-0.0675,-0.01599],"bone_rot":[-4.371138828673793e-8,0,1,3.406487686135706e-22]},
	{"name":"RightLeg","len":0.4452780043167489,"idx":49,"p_idx":48, "top":[0.15,0.43], "bot":[0.15,0], "bone_pos":[0,0.44371455907821655,0],"bone_rot":[0.003213413991034031,-0.000005006765604775865,-1.5807968267722572e-8,0.9999948143959045]},
	{"name":"RightFoot","len":0.11582555301217105,"idx":50,"p_idx":49, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.4452780485153198,0],"bone_rot":[0.3540933132171631,0.000004626839199772803,-0.0000017285617559537059,0.935210108757019]},
	{"name":"RightToeBase","len":0.1,"idx":51,"p_idx":50, "top":[0.03,0.00], "bot":[0.03,-0.00], "bone_pos":[0,0.11582556366920471,0],"bone_rot":[0.4079799950122833,1.589943821045381e-7,-4.328248692786474e-8,0.9129908680915833]}
];

/*
Maximo Bones
[
{"name":"Hips","len":0.10559237003327704,"idx":0,"p_idx":null,"pos":[0,1.0399147272109985,0.02076093479990959],"rot":[2.4268916831715615e-7,0,0,1]},
{"name":"Spine","len":0.0974514316395617,"idx":1,"p_idx":0,"pos":[0,0.10559237748384476,0],"rot":[-0.044645827263593674,-8.692448299794618e-27,-4.453656740259141e-20,0.9990028738975525]},
{"name":"Spine1","len":0.09304484613180132,"idx":2,"p_idx":1,"pos":[0,0.09745147824287415,0],"rot":[-0.029409686103463173,-3.2960057599844583e-21,4.441442901526913e-20,0.999567449092865]},
{"name":"Spine2","len":0.16759334937587658,"idx":3,"p_idx":2,"pos":[0,0.09304478764533997,0],"rot":[0.07400670647621155,3.6727628484210417e-28,9.542332680489529e-27,0.9972577691078186]},
{"name":"Neck","len":0.09762965130228998,"idx":4,"p_idx":3,"pos":[0,0.16569370031356812,-0.02516167424619198],"rot":[1.9075930168810373e-8,-1.1470830885815196e-34,-8.605402693567593e-35,1]},
{"name":"Head","len":0.1,"idx":5,"p_idx":4,"pos":[0,0.09616458415985107,0.016849953681230545],"rot":[-1.3502827300726494e-8,-4.0840682940945415e-35,-6.660796967887298e-36,1]},
{"name":"LeftShoulder","len":0.10837614876574414,"idx":6,"p_idx":3,"pos":[0.04570503160357475,0.10843020677566528,-0.0262798760086298],"rot":[0.7071067690849304,0.7071067690849304,5.338507236274381e-8,-5.338507236274381e-8]},
{"name":"LeftArm","len":0.27841533720493317,"idx":7,"p_idx":6,"pos":[-0.00524682505056262,0.10592274367809296,0.022321199998259544],"rot":[-1.495118037678709e-35,-4.519952057080445e-8,1.1566897702458666e-34,1]},
{"name":"LeftForeArm","len":0.28328818082995455,"idx":8,"p_idx":7,"pos":[0,0.278415322303772,0],"rot":[-6.706603130623989e-7,7.00962573318975e-7,0.0000016832213987072464,1]},
{"name":"LeftHand","len":0.03969602102664749,"idx":9,"p_idx":8,"pos":[0,0.2832881808280945,0],"rot":[-0.0000016157980553543894,0.000001614453026377305,-9.588043212716002e-7,1]},
{"name":"LeftHandThumb1","len":0.041696256351713874,"idx":10,"p_idx":9,"pos":[-0.01574258878827095,0.02466581016778946,-0.026824291795492172],"rot":[-0.22191810607910156,-0.059467192739248276,0.25190043449401855,0.9400862455368042]},
{"name":"LeftHandThumb2","len":0.034242796459341654,"idx":11,"p_idx":10,"pos":[0,0.041696254163980484,0],"rot":[-0.000019305929527035914,0.00003363657015142962,-0.0000676217969157733,1]},
{"name":"LeftHandThumb3","len":0.1,"idx":12,"p_idx":11,"pos":[0,0.03424280881881714,0],"rot":[0.011500630527734756,-0.0017704364145174623,0.0036687529645860195,0.9999255537986755]},
{"name":"LeftHandIndex1","len":0.03676408529281616,"idx":13,"p_idx":9,"pos":[-0.005164358299225569,0.09108859300613403,-0.02260071039199829],"rot":[0.000002279914497194113,-0.0000023154120754043106,-7.219787789836118e-7,1]},
{"name":"LeftHandIndex2","len":0.028830707074694782,"idx":14,"p_idx":13,"pos":[0,0.036764077842235565,0],"rot":[-0.000005065046025265474,0.000005125999450683594,-2.465329940193328e-9,1]},
{"name":"LeftHandIndex3","len":0.1,"idx":15,"p_idx":14,"pos":[0,0.028830723837018013,0],"rot":[0.000014023946278030053,-0.00001409131618856918,-0.000004982239261153154,1]},
{"name":"LeftHandMiddle1","len":0.03698229789733887,"idx":16,"p_idx":9,"pos":[-0.000003653086878330214,0.09533418715000153,0],"rot":[0.0000022864619495521765,-0.0000023154120754043106,-7.244172479659028e-7,1]},
{"name":"LeftHandMiddle2","len":0.02950930595452126,"idx":17,"p_idx":16,"pos":[0,0.03698229789733887,0],"rot":[-0.0000030297826469904976,0.000003099441300946637,-9.861094579788343e-12,1]},
{"name":"LeftHandMiddle3","len":0.1,"idx":18,"p_idx":17,"pos":[0,0.029509298503398895,0],"rot":[1.3773330920230364e-7,-1.8769137000163028e-7,0.000008413082468905486,1]},
{"name":"LeftHandRing1","len":0.03154021501541138,"idx":19,"p_idx":9,"pos":[-0.000433617940871045,0.09104256331920624,0.018650881946086884],"rot":[0.0000022736619484930998,-0.0000023154120754043106,-7.243664867928601e-7,1]},
{"name":"LeftHandRing2","len":0.029376685619539433,"idx":20,"p_idx":19,"pos":[0,0.03154021129012108,0],"rot":[-0.0000017625555983613594,0.000001788139229574881,-5.4141510719141195e-11,1]},
{"name":"LeftHandRing3","len":0.1,"idx":21,"p_idx":20,"pos":[0,0.0293766800314188,0],"rot":[0.0000031824711186345667,-0.000003104724555669236,0.000009005581887322478,1]},
{"name":"LeftHandPinky1","len":0.03600037097930908,"idx":22,"p_idx":9,"pos":[-0.004892153199762106,0.0807739719748497,0.038060639053583145],"rot":[0.0000022765411813452374,-0.0000023154120754043106,-7.243598361128534e-7,1]},
{"name":"LeftHandPinky2","len":0.021142065527092416,"idx":23,"p_idx":22,"pos":[0,0.03600034862756729,0],"rot":[0.000006353253411361948,-0.000006276305157371098,0.000002819155724864686,1]},
{"name":"LeftHandPinky3","len":0.1,"idx":24,"p_idx":23,"pos":[0,0.021142063662409782,0],"rot":[-0.000005777703790954547,0.000005574775059358217,-0.000008853048711898737,1]},
{"name":"RightShoulder","len":0.10838109046244417,"idx":25,"p_idx":3,"pos":[-0.045699592679739,0.10842543840408325,-0.026280172169208527],"rot":[1.0185958743136325e-8,-1.0185956966779486e-8,0.7071067690849304,0.7071067690849304]},
{"name":"RightArm","len":0.27841518819332123,"idx":26,"p_idx":25,"pos":[-0.005235613323748112,0.105928435921669,-0.022320741787552834],"rot":[3.736904002898115e-35,-1.006445394960507e-15,-5.495755792415194e-35,1]},
{"name":"RightForeArm","len":0.2832881212237005,"idx":27,"p_idx":26,"pos":[0,0.2784152030944824,0],"rot":[2.1040301589891897e-7,-2.0325643390606274e-7,6.31208195045474e-7,1]},
{"name":"RightHand","len":0.08941820392476747,"idx":28,"p_idx":27,"pos":[0,0.2832881510257721,0],"rot":[0.000003163138671880006,-0.000003194210648871376,-6.312201321634348e-7,1]},
{"name":"RightHandPinky1","len":0.03600037097930908,"idx":29,"p_idx":28,"pos":[-0.004894803743809462,0.08076566457748413,-0.03806004300713539],"rot":[-0.0000033630744837864768,0.0000033974647521972656,-1.1425927912145362e-11,1]},
{"name":"RightHandPinky2","len":0.021142125137114453,"idx":30,"p_idx":29,"pos":[0,0.03600034862756729,0],"rot":[0.000011971213098149747,-0.000011956633898080327,-0.0000056385929383395705,1]},
{"name":"RightHandPinky3","len":0.1,"idx":31,"p_idx":30,"pos":[0,0.02114214189350605,0],"rot":[-0.00000802205249783583,0.000008068487659329548,-3.9523754935544275e-7,1]},
{"name":"RightHandRing1","len":0.03154021501541138,"idx":32,"p_idx":28,"pos":[-0.00043874504626728594,0.09103216230869293,-0.018651019781827927],"rot":[-0.000003366203372934251,0.000003397464979570941,-1.1436558297606148e-11,1]},
{"name":"RightHandRing2","len":0.02937680483481248,"idx":33,"p_idx":32,"pos":[0,0.03154021501541138,0],"rot":[0.000008235279892687686,-0.000008292319762404077,-0.000006086941539251711,1]},
{"name":"RightHandRing3","len":0.1,"idx":34,"p_idx":33,"pos":[0,0.029376834630966187,0],"rot":[-0.000015700450603617355,0.00001574820271343924,0.000015092553439899348,1]},
{"name":"RightHandMiddle1","len":0.036982178688049316,"idx":35,"p_idx":28,"pos":[0,0.09531952440738678,0],"rot":[-0.000003373543677298585,0.0000033974647521972656,1.1594199558762064e-11,1]},
{"name":"RightHandMiddle2","len":0.029509425164356336,"idx":36,"p_idx":35,"pos":[0,0.036982160061597824,0],"rot":[-0.000003787220066442387,0.0000038214084270293824,-0.000002019868361458066,1]},
{"name":"RightHandMiddle3","len":0.1,"idx":37,"p_idx":36,"pos":[0,0.029509400948882103,0],"rot":[0.000003721492703334661,-0.0000037618035548803164,0.0000020198690435790922,1]},
{"name":"RightHandIndex1","len":0.03676402568817139,"idx":38,"p_idx":28,"pos":[-0.005171900615096092,0.09108030050992966,0.022601136937737465],"rot":[-0.0000033692147098918213,0.0000033974647521972656,-1.1446789696667459e-11,1]},
{"name":"RightHandIndex2","len":0.02883070707527981,"idx":39,"p_idx":38,"pos":[0,0.036764007061719894,0],"rot":[0.000005616404450847767,-0.000005643691110890359,-0.0000020674101506301668,1]},
{"name":"RightHandIndex3","len":0.1,"idx":40,"p_idx":39,"pos":[0,0.028830701485276222,0],"rot":[0.000002786867753457045,-0.000002750003659457434,0.000012031735423079226,1]},
{"name":"RightHandThumb1","len":0.04171650653444302,"idx":41,"p_idx":28,"pos":[-0.015732264146208763,0.02464570663869381,0.026827214285731316],"rot":[0.22176654636859894,0.05947277694940567,0.25208544731140137,0.9400720596313477]},
{"name":"RightHandThumb2","len":0.034223893455291164,"idx":42,"p_idx":41,"pos":[0,0.0417165532708168,0],"rot":[0.00034027191577479243,-0.00019238849927205592,-0.0003856124822050333,0.9999998211860657]},
{"name":"RightHandThumb3","len":0.1,"idx":43,"p_idx":42,"pos":[0,0.034223929047584534,0],"rot":[-0.011897333897650242,0.00195137073751539,0.004018437582999468,0.9999192357063293]},
{"name":"LeftUpLeg","len":0.44371384382253165,"idx":44,"p_idx":0,"pos":[0.08207781612873077,-0.06751483678817749,-0.015995413064956665],"rot":[-4.371138828673793e-8,0,1,3.406487686135706e-22]},
{"name":"LeftLeg","len":0.4452783841217977,"idx":45,"p_idx":44,"pos":[0,0.44371384382247925,0],"rot":[0.003196412930265069,0.0000028676147394435247,-1.5653178309094073e-8,0.9999948740005493]},
{"name":"LeftFoot","len":0.11583700957847694,"idx":46,"p_idx":45,"pos":[0,0.4452784061431885,0],"rot":[0.354154109954834,-0.0000027842902454722207,0.0000010277683486492606,0.935187041759491]},
{"name":"LeftToeBase","len":0.1,"idx":47,"p_idx":46,"pos":[0,0.11583702266216278,0],"rot":[0.4079362452030182,1.7544498120969365e-7,-2.7185055984091377e-8,0.9130104184150696]},
{"name":"RightUpLeg","len":0.44371455907826896,"idx":48,"p_idx":0,"pos":[-0.08207795768976212,-0.06751573085784912,-0.0159954521805048],"rot":[-4.371138828673793e-8,0,1,3.406487686135706e-22]},
{"name":"RightLeg","len":0.4452780043167489,"idx":49,"p_idx":48,"pos":[0,0.44371455907821655,0],"rot":[0.003213413991034031,-0.000005006765604775865,-1.5807968267722572e-8,0.9999948143959045]},
{"name":"RightFoot","len":0.11582555301217105,"idx":50,"p_idx":49,"pos":[0,0.4452780485153198,0],"rot":[0.3540933132171631,0.000004626839199772803,-0.0000017285617559537059,0.935210108757019]},
{"name":"RightToeBase","len":0.1,"idx":51,"p_idx":50,"pos":[0,0.11582556366920471,0],"rot":[0.4079799950122833,1.589943821045381e-7,-4.328248692786474e-8,0.9129908680915833]}
]
*/

//#####################################################
</script><page-layout></page-layout>