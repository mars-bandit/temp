<!DOCTYPE html><script type="module">
import App				from "../../fungi/App.js";
import XhrPromise		from "../../fungi/lib/XhrPromise.js";
import GltfUtil,{Gltf}	from "../../fungi/lib/GltfUtil.js";
import TPose 			from "../../fungi.armature/TPose.js";

//#####################################################
App.builder( true, false )
	.use_armature()
	.load_shaders( "../fungi.armature/LowPolySkin.js" )
	.set_camera( 0, 0, 3.2, 0, 0.65, 0 )
	.add( init )
	.render_on_mouse()
	.build();

//#####################################################
async function init(){
	let dl = await XhrPromise.get( 
		"../../_tmp/robo_trex.gltf", "json", 
		"../../_tmp/robo_trex.bin", "arraybuffer",
	);

	//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	
	let mat	= App.new_mat( "LowPolySkin", { color:"white" } );

	//let e 	= GltfUtil.get_bone_view( "test", dl[0], dl[1] );
	let e 	= GltfUtil.get_debug_view( "test", dl[0], dl[1], mat );
	
	//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

	
	let tpose = TPose.new( e )
		.align_leg( ["LeftUpLeg", "LeftKnee", "LeftShin"] )
		.align_leg( ["RightUpLeg", "RightKnee", "RightShin"] )
		//.align_arm_left( ["LeftArm", "LeftForeArm"] )
		//.align_arm_right( ["RightArm", "RightForeArm"] )
		.align_foot( "LeftFoot" )
		.align_foot( "RightFoot" )
		//.spin_bone_forward( "LeftFoot" )
		//.spin_bone_forward( "RightFoot" )
		//.align_bone_forward( "LeftFoot" )
		//.align_bone_forward( "RightFoot" )
		.build();

	

	tpose.apply();
	//e.Node.set_pos(0, 0.5, 0);
	
	//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

	console.log( GltfUtil.serialize_pose( "tpose", 0, tpose ) );
	return true;
}

</script><page-layout></page-layout>