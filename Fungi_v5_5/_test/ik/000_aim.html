<!DOCTYPE html><script type="module">
import App, { Vec3, Quat, Mat4, Transform } from "../../fungi/App.js";
import ArmFactory from "../../fungi.armature/ArmFactory.js";;
import DragPoints from "../../fungi.misc/DragPoints.js";

//#####################################################
App
	.init( true )
	.load_pkg( { name:"fungi.armature", bone_view:true, mat:false } )
	.use_events()
	.use_debug()
	.set_camera( 0, 20, 3, 0, 0.0, 0 )
	.task( init )
	.then();

//#####################################################

let $chain, $tpose, $pose;

async function init(){
	//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	// Systems
	DragPoints.init().set_move_handler( on_pnt_move );

	// IK Targets
	DragPoints.pnt( [0, 0.8, 0 ], null, "cyan", 1, 0.06 );
	DragPoints.pnt( [0, 0.2, 0.4 ], null, "yellow", 1, 0.06 );

	//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	// Armature
	$chain	= ArmFactory.chain( [ 0.2, 0.2, 0.2 ] );
	$tpose	= $chain.arm.new_pose();
	$pose	= $chain.arm.new_pose();

	return true;
}

function on_pnt_move( idx, pos ){
	console.log( idx, pos );
}


//#####################################################
</script>
<html><head><style>html,body{ margin:0px; padding:0px; width:100%; height:100%; }</style>
</head><body><canvas id="pg_canvas"></canvas></body></html>